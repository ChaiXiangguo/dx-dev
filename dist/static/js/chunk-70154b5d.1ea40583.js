(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70154b5d"],{"225d":function(t,e,o){"use strict";o("baee")},"4d7b":function(t,e,o){"use strict";o("c447")},6498:function(t,e,o){},"6e71":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"PageConfig-page"},[e("div",{staticClass:"PageConfig-header border-box-style"},[e("span",{staticClass:"back-box",on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" "+t._s(t.configData.pageName)+" ")]),e("div",[e("el-button",{attrs:{type:"text",icon:"el-icon-view"}},[t._v("预览")]),e("el-button",{attrs:{type:"text",icon:"el-icon-s-promotion"},on:{click:t.savePage}},[t._v("保存")])],1)]),e("div",{staticClass:"PageConfig-body"},[t.configData?e("LeftMidRight",[e("Source",{attrs:{slot:"left","config-data":t.configData},slot:"left"}),e("pageSetting",{attrs:{slot:"mid","config-data":t.configData,"global-obj":t.globalObj},slot:"mid"}),e("Setting",{attrs:{slot:"right","config-data":t.configData,"global-obj":t.globalObj},slot:"right"})],1):t._e()],1)])},n=[],i=o("5530"),l=(o("b64b"),o("e9c4"),o("7e29")),c=o("472b"),s=o("97b9"),r=o("da71"),u={name:"PageConfig",components:{pageSetting:l["default"],Source:c["a"],Setting:s["a"]},data:function(){return{globalObj:{activeComponent:null},configData:null}},computed:{},created:function(){var t=this;Object(r["e"])(this.$route.query.id).then((function(e){e.data&&(e.data.layoutInfo?(e.data.layoutInfo=JSON.parse(e.data.layoutInfo),e.data.type="page"):(e.data.layoutInfo={showLayoutInfo:[{x:0,y:0,w:6,h:20,i:"0"},{x:6,y:0,w:14,h:10,i:"1"},{x:6,y:10,w:14,h:10,i:"2"}]},e.data.type="page"),t.$set(t,"configData",e.data))}))},mounted:function(){},methods:{savePage:function(){var t=this,e=Object(i["a"])(Object(i["a"])({},this.configData),{},{layoutInfo:JSON.stringify(this.configData.layoutInfo)});Object(r["i"])(e).then((function(e){t.$message({type:"success",message:"保存成功!"})}))}}},m=u,p=(o("dc39"),o("2877")),d=Object(p["a"])(m,a,n,!1,null,null,null);e["default"]=d.exports},"7e29":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{ref:"pageSetting",staticClass:"page-setting-box"},[e("grid-layout",t._b({attrs:{layout:t.configData.layoutInfo.showLayoutInfo,"use-css-transforms":!0}},"grid-layout",t.layout,!1),t._l(t.configData.layoutInfo.showLayoutInfo,(function(o,a){return e("grid-item",t._b({key:a},"grid-item",o,!1),[e("container-box",{attrs:{"layout-data":o,"global-obj":t.globalObj,"show-layout-info":t.configData.layoutInfo.showLayoutInfo},on:{delContainer:function(e){return t.delContainer(o,a)}}})],1)})),1)],1)},n=[],i=(o("a434"),o("7be8")),l=o("cc35"),c={components:{GridLayout:i["GridLayout"],GridItem:i["GridItem"],ContainerBox:l["default"]},props:{globalObj:{type:Object,default:function(){return{}}},configData:{type:Object,default:function(){}}},data:function(){return{layout:{colNum:20,rowHeight:30,isDraggable:!0,isResizable:!0,isMirrored:!1,verticalCompact:!0,responsive:!0,margin:[10,10],cols:{lg:20,md:20,sm:20,xs:20,xxs:20}}}},mounted:function(){var t=this;this.$nextTick((function(){t.$set(t.layout,"rowHeight",(t.$refs.pageSetting.offsetHeight-36)/20-9)}))},methods:{delContainer:function(t,e){this.configData.layoutInfo.showLayoutInfo.splice(e,1)}}},s=c,r=(o("966a"),o("2877")),u=Object(r["a"])(s,a,n,!1,null,null,null);e["default"]=u.exports},"85bc":function(t,e,o){"use strict";o.r(e);var a=o("5530"),n=function(){var t=this,e=t._self._c;return e("div",[e("el-select",{attrs:{value:t.value,"value-key":"value"},on:{change:t.changeFun}},t._l(t.options,(function(t,o){return e("el-option",{key:o,attrs:{label:t.label,value:t}})})),1),e("CcCbmCmp",{key:t.key,ref:"emitCom",staticStyle:{display:"none"},attrs:{lc:Object(a["a"])({},t.activeLc)}})],1)},i=[],l=(o("7db0"),o("d3b7"),{props:{value:{type:Object,default:function(){}},otherComList:{type:Array,default:function(){return[]}},model:{type:Object,default:function(){}}},data:function(){return{activeLc:{},key:this.$utils.guid(),options:[]}},watch:{model:{handler:function(t){var e=this;if(t&&t.emitCom){var o=this.otherComList.find((function(e){return e.key===t.emitCom}));o&&(this.key=this.$utils.guid(),this.activeLc=o),this.$nextTick((function(){e.timer=setInterval((function(){e.$refs.emitCom&&e.$refs.emitCom.$refs.CcCbmCmp?(e.options=e.$refs.emitCom.$refs.CcCbmCmp.methodsList||[],clearInterval(e.timer)):e.$refs.emitCom||clearInterval(e.timer)}),1e3)}))}},deep:!0,immediate:!0}},beforeDestroy:function(){clearInterval(this.timer)},methods:{changeFun:function(t){this.$emit("input",t)}}}),c=l,s=o("2877"),r=Object(s["a"])(c,n,i,!1,null,null,null);e["default"]=r.exports},"966a":function(t,e,o){"use strict";o("a717")},a717:function(t,e,o){},ac68:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Communication-setting-com"},[e("cc-table",{ref:"table",attrs:{data:t.model,"layout-data":t.layoutData}}),e("cc-popout",{ref:"popout",attrs:{"pop-props":t.popParams}})],1)},n=[],i=(o("7db0"),o("d3b7"),o("a434"),o("b64b"),o("e9c4"),o("85bc")),l={name:"CommunicationSetting",props:{model:{type:Array,default:function(){return[]}},emitList:{type:Array,default:function(){return[]}},otherComList:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{popParams:{},layoutData:{column:[{type:"index",label:"#",width:80},{prop:"event",label:"触发事件",formatter:function(e,o){var a=t.emitList.find((function(t){return t.value===e[o.property]}));return a?a.label:""}},{prop:"emitCom",label:"触发组件",formatter:function(e,o){var a=t.otherComList.find((function(t){return t.value===e[o.property]}));return a?a.label:""}},{prop:"method.label",label:"调用方法"}],config:{btnsRow:[{type:"text",label:"删除",key:"delete",handler:function(e,o){t.model.splice(o.$index,1)}},{type:"text",label:"编辑",key:"edit",handler:function(e,o){t.popParams={showFlag:!0,size:"big",title:"新增通信",confirmEvent:function(e){t.model[o.$index]=e},content:{layoutData:t.addFormLayoutData,model:JSON.parse(JSON.stringify(o.row)),type:"form"}}}}],btnsCol:[{type:"primary",label:"新增",key:"add",handler:function(){t.popParams={showFlag:!0,size:"big",title:"新增通信",confirmEvent:function(e){t.model.push(e)},content:{layoutData:t.addFormLayoutData,model:{argumentFun:"return params"},type:"form"}}}},{type:"primary",label:"删除",key:"delete"}],border:!0,showCheckbox:!0}}}},computed:{addFormLayoutData:function(){return{formDataList:[{name:"CcLayout",makeStyle:{active:!0},style:{hideLabel:!0},setting:{columns:2,gutter:0,groupList:[{prop:"argumentFun",name:"CcCodeEdit",label:"传递参数",setting:{colWidth:2,remindText:"传递给调用参数的方法参数,参考配置：return params",isRemote:!1,remoteUrl:"",remoteDataPath:"",remoteDataProps:{label:"label",value:"value"}}},{prop:"event",name:"CcSelect",label:"触发事件",selections:this.emitList,setting:{colWidth:1,isRemote:!1,remoteUrl:"",remoteDataPath:"",remoteDataProps:{label:"label",value:"value"}}},{prop:"emitCom",name:"CcSelect",label:"触发组件",selections:this.otherComList,setting:{colWidth:1,isRemote:!1,remoteUrl:"",remoteDataPath:"",remoteDataProps:{label:"label",value:"value"}}},{prop:"method",name:i["default"],label:"调用方法",selections:this.methodsList,setting:{otherComList:this.otherComList,colWidth:1,isRemote:!1,remoteUrl:"",remoteDataPath:"",remoteDataProps:{label:"label",value:"value"}}}]}}]}}},mounted:function(){}},c=l,s=(o("225d"),o("2877")),r=Object(s["a"])(c,a,n,!1,null,null,null);e["default"]=r.exports},baee:function(t,e,o){},c447:function(t,e,o){},cc35:function(t,e,o){"use strict";o.r(e);o("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-box-box",class:{"active-container-box-box":t.globalObj.activeComponent&&"container"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.i===t.layoutData.i},on:{click:function(e){return e.stopPropagation(),t.setActive(t.layoutData,"container")}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.globalObj.activeComponent&&"container"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.i===t.layoutData.i,expression:"globalObj.activeComponent && globalObj.activeComponent.type === 'container' && globalObj.activeComponent.data.i === layoutData.i"}],staticClass:"cmp-box-op"},[e("span",{staticClass:"el-icon-op",on:{click:function(e){return t.copy(t.item,t.index)}}},[e("i",{staticClass:"el-icon-document-copy"})]),e("span",{staticClass:"el-icon-op",on:{click:t.delContainer}},[e("i",{staticClass:"el-icon-delete"})])]),"tabs"===t.layoutData.type?e("el-tabs",{staticClass:"container-tabs-box"},t._l(t.layoutData.tabs,(function(o){return e("el-tab-pane",{key:o.key,attrs:{label:o.name,lazy:""}},[e("draggable",{staticClass:"canvas-page-content-draggable",attrs:{group:"TpFormGroup",animation:"300"},on:{add:t.draggableAdd},model:{value:o.components,callback:function(e){t.$set(o,"components",e)},expression:"tItem.components"}},[o.components&&o.components.length?t._l(o.components,(function(a,n){return e("div",{key:n,staticClass:"cmp-box",class:{"active-cmp-box":t.globalObj.activeComponent&&"com"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.component.layoutKey===a.component.layoutKey&&t.globalObj.activeComponent.data.component.layoutModelCode===a.component.layoutModelCode},style:{height:a.height?a.height+"%":100/o.components.length+"%"},on:{click:function(e){return e.stopPropagation(),t.setActive(a,"com")}}},[e("CcCbmCmp",{ref:a.component.key,refInFor:!0,attrs:{lc:{layoutKey:a.component.layoutKey,layoutModelCode:a.component.layoutModelCode}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.globalObj.activeComponent&&"com"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.component.layoutKey===a.component.layoutKey&&t.globalObj.activeComponent.data.component.layoutModelCode===a.component.layoutModelCode,expression:"globalObj.activeComponent && globalObj.activeComponent.type === 'com' && globalObj.activeComponent.data.component.layoutKey === item.component.layoutKey && globalObj.activeComponent.data.component.layoutModelCode === item.component.layoutModelCode"}],staticClass:"cmp-box-op"},[e("span",{staticClass:"el-icon-op",attrs:{title:"通信"},on:{click:function(e){return e.stopPropagation(),t.communicationFun(a,n)}}},[e("i",{staticClass:"el-icon-notebook-2"})]),e("span",{staticClass:"el-icon-op",attrs:{title:"删除"},on:{click:function(e){return t.del(a,n)}}},[e("i",{staticClass:"el-icon-delete"})])])],1)})):e("div",[t._v(" 拖拽组件到这里 ")])],2)],1)})),1):e("draggable",{staticClass:"canvas-page-content-draggable",attrs:{group:"TpFormGroup",animation:"300"},on:{add:t.draggableAdd},model:{value:t.layoutData.components,callback:function(e){t.$set(t.layoutData,"components",e)},expression:"layoutData.components"}},[t.layoutData&&t.layoutData.components&&t.layoutData.components.length?t._l(t.layoutData.components,(function(o,a){return e("div",{key:a,staticClass:"cmp-box",class:{"active-cmp-box":t.globalObj.activeComponent&&"com"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.component.layoutKey===o.component.layoutKey&&t.globalObj.activeComponent.data.component.layoutModelCode===o.component.layoutModelCode},style:{height:o.height?o.height+"%":100/t.layoutData.components.length+"%"},on:{click:function(e){return e.stopPropagation(),t.setActive(o,"com")}}},[e("CcCbmCmp",{ref:o.component.key,refInFor:!0,attrs:{lc:{layoutKey:o.component.layoutKey,layoutModelCode:o.component.layoutModelCode}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.globalObj.activeComponent&&"com"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.component.layoutKey===o.component.layoutKey&&t.globalObj.activeComponent.data.component.layoutModelCode===o.component.layoutModelCode,expression:"globalObj.activeComponent && globalObj.activeComponent.type === 'com' && globalObj.activeComponent.data.component.layoutKey === item.component.layoutKey && globalObj.activeComponent.data.component.layoutModelCode === item.component.layoutModelCode"}],staticClass:"cmp-box-op"},[e("span",{staticClass:"el-icon-op",attrs:{title:"通信"},on:{click:function(e){return e.stopPropagation(),t.communicationFun(o,a)}}},[e("i",{staticClass:"el-icon-notebook-2"})]),e("span",{staticClass:"el-icon-op",attrs:{title:"删除"},on:{click:function(e){return t.del(o,a)}}},[e("i",{staticClass:"el-icon-delete"})])])],1)})):e("div",[t._v(" 拖拽组件到这里 ")])],2),e("cc-popout",{ref:"popout",attrs:{"pop-props":t.popParams}})],1)},n=[],i=o("5530"),l=o("b85c"),c=(o("b64b"),o("e9c4"),o("a434"),o("ac68")),s={components:{},props:{layoutData:{type:Object,default:function(){return{}}},showLayoutInfo:{type:Array,default:function(){return[]}},globalObj:{type:Object,default:function(){return{}}}},data:function(){return{draggableArr:[],popParams:{}}},computed:{},created:function(){this.layoutData.components||this.$set(this.layoutData,"components",[])},methods:{communicationFun:function(t,e){var o=this;t.communicationList||this.$set(t,"communicationList",[]);var a=[];this.$refs[t.component.key][0]&&(a=this.$refs[t.component.key][0].$refs.CcCbmCmp.emitList);var n,s=[],r=Object(l["a"])(this.showLayoutInfo);try{for(r.s();!(n=r.n()).done;){var u=n.value;if("tabs"===u.type){var m,p=Object(l["a"])(u.tabs);try{for(p.s();!(m=p.n()).done;){var d,b=m.value,f=Object(l["a"])(b.components);try{for(f.s();!(d=f.n()).done;){var y=d.value;s.push(Object(i["a"])({value:y.component.key,label:y.component.name},y.component))}}catch(h){f.e(h)}finally{f.f()}}}catch(h){p.e(h)}finally{p.f()}}else{var g,v=Object(l["a"])(u.components);try{for(v.s();!(g=v.n()).done;){var C=g.value;s.push(Object(i["a"])({value:C.component.key,label:C.component.name},C.component))}}catch(h){v.e(h)}finally{v.f()}}}}catch(h){r.e(h)}finally{r.f()}this.popParams={showFlag:!0,size:"big",name:"dialog",title:"设置通信",confirmEvent:function(e){o.$set(t,"communicationList",e)},content:{cmp:c["default"],model:JSON.parse(JSON.stringify(t.communicationList)),bindProps:{emitList:a,otherComList:s}}}},delContainer:function(){this.$emit("delContainer")},copy:function(t,e){},del:function(t,e){this.layoutData.components.splice(e,1)},setActive:function(t,e){this.$set(this.globalObj,"activeComponent",{data:t,type:e})},draggableAdd:function(t){t.to,t.from,t.item,t.clone,t.oldIndex,t.newIndex}}},r=s,u=(o("4d7b"),o("2877")),m=Object(u["a"])(r,a,n,!1,null,null,null);e["default"]=m.exports},dc39:function(t,e,o){"use strict";o("6498")}}]);