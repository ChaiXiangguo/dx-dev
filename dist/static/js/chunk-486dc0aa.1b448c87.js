(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-486dc0aa"],{"08e7":function(o,t,e){"use strict";e("a767")},"3fad":function(o,t,e){"use strict";e("bf0b")},"7d0e":function(o,t,e){"use strict";e.r(t);e("b0c0");var n=function(){var o=this,t=o._self._c;return t("div",{staticClass:"container-box-box",class:{"active-container-box-box":o.globalObj.activeComponent&&"container"===o.globalObj.activeComponent.type&&o.globalObj.activeComponent.data.i===o.layoutData.i},on:{click:function(t){return t.stopPropagation(),o.setActive(o.layoutData,"container")}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:o.globalObj.activeComponent&&"container"===o.globalObj.activeComponent.type&&o.globalObj.activeComponent.data.i===o.layoutData.i,expression:"globalObj.activeComponent && globalObj.activeComponent.type === 'container' && globalObj.activeComponent.data.i === layoutData.i"}],staticClass:"cmp-box-op"},[t("span",{staticClass:"el-icon-op",on:{click:function(t){return o.copy(o.item,o.index)}}},[t("i",{staticClass:"el-icon-document-copy"})]),t("span",{staticClass:"el-icon-op",on:{click:o.delContainer}},[t("i",{staticClass:"el-icon-delete"})])]),"tabs"===o.layoutData.type?t("el-tabs",{staticClass:"container-tabs-box"},o._l(o.layoutData.tabs,(function(e){return t("el-tab-pane",{key:e.key,attrs:{label:e.name,lazy:""}},[t("draggable",{staticClass:"canvas-page-content-draggable",attrs:{group:"TpFormGroup",animation:"300"},on:{add:o.draggableAdd},model:{value:e.components,callback:function(t){o.$set(e,"components",t)},expression:"tItem.components"}},[e.components&&e.components.length?o._l(e.components,(function(n,a){return t("div",{key:a,staticClass:"cmp-box",class:{"active-cmp-box":o.globalObj.activeComponent&&"com"===o.globalObj.activeComponent.type&&o.globalObj.activeComponent.data.component.layoutKey===n.component.layoutKey&&o.globalObj.activeComponent.data.component.layoutModelCode===n.component.layoutModelCode},style:{height:n.height?n.height+"%":100/e.components.length+"%"},on:{click:function(t){return t.stopPropagation(),o.setActive(n,"com")}}},[t("CcCbmCmp",{attrs:{lc:{layoutKey:n.component.layoutKey,layoutModelCode:n.component.layoutModelCode}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:o.globalObj.activeComponent&&"com"===o.globalObj.activeComponent.type&&o.globalObj.activeComponent.data.component.layoutKey===n.component.layoutKey&&o.globalObj.activeComponent.data.component.layoutModelCode===n.component.layoutModelCode,expression:"globalObj.activeComponent && globalObj.activeComponent.type === 'com' && globalObj.activeComponent.data.component.layoutKey === item.component.layoutKey && globalObj.activeComponent.data.component.layoutModelCode === item.component.layoutModelCode"}],staticClass:"cmp-box-op"},[t("span",{staticClass:"el-icon-op",on:{click:function(t){return o.copy(n,a)}}},[t("i",{staticClass:"el-icon-document-copy"})]),t("span",{staticClass:"el-icon-op",on:{click:function(t){return o.del(n,a)}}},[t("i",{staticClass:"el-icon-delete"})])])],1)})):t("div",[o._v(" 拖拽组件到这里 ")])],2)],1)})),1):t("draggable",{staticClass:"canvas-page-content-draggable",attrs:{group:"TpFormGroup",animation:"300"},on:{add:o.draggableAdd},model:{value:o.layoutData.components,callback:function(t){o.$set(o.layoutData,"components",t)},expression:"layoutData.components"}},[o.layoutData&&o.layoutData.components&&o.layoutData.components.length?o._l(o.layoutData.components,(function(e,n){return t("div",{key:n,staticClass:"cmp-box",class:{"active-cmp-box":o.globalObj.activeComponent&&"com"===o.globalObj.activeComponent.type&&o.globalObj.activeComponent.data.component.layoutKey===e.component.layoutKey&&o.globalObj.activeComponent.data.component.layoutModelCode===e.component.layoutModelCode},style:{height:e.height?e.height+"%":100/o.layoutData.components.length+"%"},on:{click:function(t){return t.stopPropagation(),o.setActive(e,"com")}}},[t("CcCbmCmp",{attrs:{lc:{layoutKey:e.component.layoutKey,layoutModelCode:e.component.layoutModelCode}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:o.globalObj.activeComponent&&"com"===o.globalObj.activeComponent.type&&o.globalObj.activeComponent.data.component.layoutKey===e.component.layoutKey&&o.globalObj.activeComponent.data.component.layoutModelCode===e.component.layoutModelCode,expression:"globalObj.activeComponent && globalObj.activeComponent.type === 'com' && globalObj.activeComponent.data.component.layoutKey === item.component.layoutKey && globalObj.activeComponent.data.component.layoutModelCode === item.component.layoutModelCode"}],staticClass:"cmp-box-op"},[t("span",{staticClass:"el-icon-op",on:{click:function(t){return o.copy(e,n)}}},[t("i",{staticClass:"el-icon-document-copy"})]),t("span",{staticClass:"el-icon-op",on:{click:function(t){return o.del(e,n)}}},[t("i",{staticClass:"el-icon-delete"})])])],1)})):t("div",[o._v(" 拖拽组件到这里 ")])],2)],1)},a=[],c=(e("a434"),{components:{},props:{layoutData:{type:Object,default:function(){return{}}},globalObj:{type:Object,default:function(){return{}}}},data:function(){return{draggableArr:[]}},computed:{},created:function(){this.layoutData.components||this.$set(this.layoutData,"components",[])},methods:{delContainer:function(){this.$emit("delContainer")},copy:function(o,t){},del:function(o,t){this.layoutData.components.splice(t,1)},setActive:function(o,t){this.$set(this.globalObj,"activeComponent",{data:o,type:t})},draggableAdd:function(o){o.to,o.from,o.item,o.clone,o.oldIndex,o.newIndex}}}),i=c,l=(e("ee1d"),e("2877")),s=Object(l["a"])(i,n,a,!1,null,null,null);t["default"]=s.exports},a767:function(o,t,e){},ac6c:function(o,t,e){var n={"./config":"a5a0","./config/":"a5a0","./config/components/PageConfig":"b599","./config/components/PageConfig/":"b599","./config/components/PageConfig/components/pageSetting":"d3e5","./config/components/PageConfig/components/pageSetting/":"d3e5","./config/components/PageConfig/components/pageSetting/ContainerBox":"7d0e","./config/components/PageConfig/components/pageSetting/ContainerBox.vue":"7d0e","./config/components/PageConfig/components/pageSetting/index":"d3e5","./config/components/PageConfig/components/pageSetting/index.vue":"d3e5","./config/components/PageConfig/index":"b599","./config/components/PageConfig/index.vue":"b599","./config/index":"a5a0","./config/index.js":"a5a0"};function a(o){var t=c(o);return e(t)}function c(o){if(!e.o(n,o)){var t=new Error("Cannot find module '"+o+"'");throw t.code="MODULE_NOT_FOUND",t}return n[o]}a.keys=function(){return Object.keys(n)},a.resolve=c,o.exports=a,a.id="ac6c"},b599:function(o,t,e){"use strict";e.r(t);e("b0c0");var n=function(){var o=this,t=o._self._c;return t("div",{staticClass:"PageConfig-page"},[t("div",{staticClass:"PageConfig-header border-box-style"},[t("span",[o._v(" "+o._s(o.configData.name)+" ")]),t("div",[t("el-button",{attrs:{type:"primary",icon:"el-icon-view"}},[o._v("预览")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-s-promotion"},on:{click:o.savePage}},[o._v("保存")])],1)]),t("div",{staticClass:"PageConfig-body"},[o.configData?t("LeftMidRight",[t("Source",{attrs:{slot:"left","config-data":o.configData},slot:"left"}),t("pageSetting",{attrs:{slot:"mid","config-data":o.configData,"global-obj":o.globalObj},slot:"mid"}),t("Setting",{attrs:{slot:"right","config-data":o.configData,"global-obj":o.globalObj},slot:"right"})],1):o._e()],1)])},a=[],c=e("5530"),i=(e("ac1f"),e("841c"),e("b64b"),e("e9c4"),e("d3e5")),l=e("472b"),s=e("97b9"),p={name:"PageConfig",components:{pageSetting:i["default"],Source:l["a"],Setting:s["a"]},data:function(){return{globalObj:{activeComponent:null},configData:null}},computed:{},created:function(){var o=this;this.$fetch.search("page",{current:1,expand:"",orders:[{asc:!0,field:""}],searchParams:[{filter:!0,operator:"EQ",param:"id",values:[this.$route.query.id]}],size:999}).then((function(t){t.data.records[0]&&(t.data.records[0].layoutInfo?(t.data.records[0].layoutInfo=JSON.parse(t.data.records[0].layoutInfo),t.data.records[0].type="page"):(t.data.records[0].layoutInfo={showLayoutInfo:[{x:0,y:0,w:6,h:20,i:"0"},{x:6,y:0,w:14,h:10,i:"1"},{x:6,y:10,w:14,h:10,i:"2"}]},t.data.records[0].type="page"),o.$set(o,"configData",t.data.records[0]),console.log(o.configData))}))},mounted:function(){},methods:{savePage:function(){var o=this,t=Object(c["a"])(Object(c["a"])({},this.configData),{},{op:"UPDATE",layoutInfo:JSON.stringify(this.configData.layoutInfo)});this.$fetch.save("page",t).then((function(t){o.$message({type:"success",message:"保存成功!"})}))}}},r=p,u=(e("08e7"),e("2877")),d=Object(u["a"])(r,n,a,!1,null,null,null);t["default"]=d.exports},bf0b:function(o,t,e){},d3e5:function(o,t,e){"use strict";e.r(t);var n=function(){var o=this,t=o._self._c;return t("div",{ref:"pageSetting",staticClass:"page-setting-box"},[t("grid-layout",o._b({attrs:{layout:o.configData.layoutInfo.showLayoutInfo,"use-css-transforms":!0}},"grid-layout",o.layout,!1),o._l(o.configData.layoutInfo.showLayoutInfo,(function(e,n){return t("grid-item",o._b({key:n},"grid-item",e,!1),[t("container-box",{attrs:{"layout-data":e,"global-obj":o.globalObj},on:{delContainer:function(t){return o.delContainer(e,n)}}})],1)})),1)],1)},a=[],c=(e("a434"),e("7be8")),i=e("7d0e"),l={components:{GridLayout:c["GridLayout"],GridItem:c["GridItem"],ContainerBox:i["default"]},props:{globalObj:{type:Object,default:function(){return{}}},configData:{type:Object,default:function(){}}},data:function(){return{layout:{colNum:20,rowHeight:30,isDraggable:!0,isResizable:!0,isMirrored:!1,verticalCompact:!0,responsive:!0,margin:[10,10],cols:{lg:20,md:20,sm:20,xs:20,xxs:20}}}},mounted:function(){var o=this;this.$nextTick((function(){o.$set(o.layout,"rowHeight",(o.$refs.pageSetting.offsetHeight-36)/20-9)}))},methods:{delContainer:function(o,t){this.configData.layoutInfo.showLayoutInfo.splice(t,1)}}},s=l,p=(e("3fad"),e("2877")),r=Object(p["a"])(s,n,a,!1,null,null,null);t["default"]=r.exports},ee1d:function(o,t,e){"use strict";e("f460")},f460:function(o,t,e){}}]);