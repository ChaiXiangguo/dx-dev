(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0785220"],{"0952":function(t,a,e){},"0e61":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"treeBox-box"},[a("el-collapse",{on:{change:t.handleChange},model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},t._l(t.layoutData.node,(function(e,o){return a("el-collapse-item",{key:e.elemCode+o,attrs:{title:e.isDefault?"默认":e.expression,name:e.elemCode}},[a("div",{staticClass:"draggable-item"},[a("draggable",{staticClass:"cc-layout--content--draggable",attrs:{group:"TpFormGroup",animation:"300"},model:{value:t.layoutData.node[o].items,callback:function(a){t.$set(t.layoutData.node[o],"items",a)},expression:"layoutData.node[index].items"}},t._l(e.items,(function(o,n){return a("div",{key:o.elemCode+n,staticClass:"treeBox-item",class:{"active-treeBox-item":t.globalObj.activeComponent&&"treeCmp"===t.globalObj.activeComponent.type&&t.globalObj.activeComponent.data.elemCode===o.elemCode},on:{click:function(a){return t.clickComponent(o)}}},[t._v(" "+t._s(o.label)+" "),a("span",{staticClass:"el-icon-circle-close",on:{click:function(a){return a.stopPropagation(),t.deleteEvent(e.items,n)}}})])})),0)],1)])})),1)],1)},n=[],l=(e("d81d"),e("a434"),e("b76a")),i=e.n(l),s={components:{draggable:i.a},props:{layoutData:{type:Object,required:!0},globalObj:{type:Object,required:!0}},data:function(){return{activeNames:[]}},computed:{},mounted:function(){this.activeNames=this.layoutData.node.map((function(t){return t.elemCode}))},methods:{clickComponent:function(t){this.globalObj.activeComponent||this.$set(this.globalObj,"activeComponent",{}),this.$set(this.globalObj,"activeComponent",{type:"treeCmp",data:t})},handleChange:function(){},deleteEvent:function(t,a){t.splice(a,1)}}},c=s,r=(e("3b4a"),e("2877")),u=Object(r["a"])(c,o,n,!1,null,"6bf191f5",null);a["default"]=u.exports},"221a":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"tpf-mf-layout--content"},[a("div",{staticClass:"tpf-mf-layout--content--header"},[a("div",{staticClass:"tpf-mf-layout--content--header--place",on:{click:function(a){return t.$router.go(-1)}}},[a("i",{staticClass:"el-icon-arrow-left"}),t._v(" "+t._s(t.configData.componentName)+" ")]),a("el-button",{staticClass:"tpf-mf-layout--content--header--btn",attrs:{type:"text",icon:"el-icon-connection"},on:{click:t.saveForm}},[t._v("保存组件")]),a("el-button",{staticClass:"tpf-mf-layout--content--header--btn",attrs:{type:"text",icon:"el-icon-copy-document"},on:{click:t.showForm}},[t._v("预览组件")]),a("el-button",{staticClass:"tpf-mf-layout--content--header--btn",attrs:{type:"text",icon:"el-icon-view"},on:{click:t.showJSON}},[t._v("查看JSON")])],1),"search"===t.configData.componentType?a("search-box",{attrs:{"global-obj":t.globalObj,"layout-data":t.configData.layoutInfo}}):t._e(),"form"===t.configData.componentType?a("forms-box",{attrs:{"global-obj":t.globalObj,"layout-data":t.configData.layoutInfo}}):t._e(),"table"===t.configData.componentType?a("table-box",{attrs:{"global-obj":t.globalObj,"layout-data":t.configData.layoutInfo}}):t._e(),"tree"===t.configData.componentType?a("tree-box",{attrs:{"global-obj":t.globalObj,"layout-data":t.configData.layoutInfo}}):t._e(),a("el-dialog",{attrs:{title:"预览组件",visible:t.showFormVisible,width:"1000px"},on:{"update:visible":function(a){t.showFormVisible=a}}},[t.showFormVisible&&"form"===t.configData.componentType?a("cc-form",{attrs:{"layout-data":t.configData.layoutInfo}}):t._e(),t.showFormVisible&&"table"===t.configData.componentType?a("cc-table",{attrs:{"layout-data":t.configData.layoutInfo}}):t._e(),t.showFormVisible&&"tree"===t.configData.componentType?a("cc-tree",{attrs:{"layout-data":t.configData.layoutInfo}}):t._e()],1),a("el-dialog",{attrs:{title:"查看JSON",visible:t.showJSONVisible,width:"600px"},on:{"update:visible":function(a){t.showJSONVisible=a}}},[t.showJSONVisible?a("json-viewer",{attrs:{value:t.json,"expand-depth":2}}):t._e()],1)],1)},n=[],l=e("349e"),i=e.n(l),s=e("b39d"),c=e("0e61"),r=e("d011"),u=e("d0ba"),f={name:"Content",components:{formsBox:r["default"],JsonViewer:i.a,tableBox:s["default"],treeBox:c["default"],searchBox:u["default"]},inject:[],props:{configData:{type:Object,required:!0},globalObj:{type:Object,required:!0}},data:function(){return{showFormVisible:!1,showJSONVisible:!1,json:"{}",form:{}}},watch:{"configData.layoutInfo.formDataList":{handler:function(t){this.$emit("change",t)},deep:!0}},methods:{saveForm:function(){this.$emit("saveForm")},showForm:function(){this.showFormVisible=!0},showJSON:function(){this.json=this.configData.layoutInfo,this.showJSONVisible=!0}}},b=f,d=e("2877"),m=Object(d["a"])(b,o,n,!1,null,null,null);a["default"]=m.exports},2909:function(t,a,e){"use strict";e.d(a,"a",(function(){return c}));var o=e("6b75");function n(t){if(Array.isArray(t))return Object(o["a"])(t)}e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0"),e("a630");function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=e("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||l(t)||Object(i["a"])(t)||s()}},"3b4a":function(t,a,e){"use strict";e("cf7c")},"6e16":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"tpf-mf-layout"},[a("div",{staticClass:"tpf-mf-layout--left"},[a("Source",{attrs:{"config-data":t.configData}})],1),a("div",{staticClass:"tpf-mf-layout--center"},[a("Content",{attrs:{"config-data":t.configData,"global-obj":t.globalObj},on:{saveForm:t.saveForm,change:t.contentChange,"select-change":t.contentSelectChange}})],1),a("div",{staticClass:"tpf-mf-layout--right"},[a("Setting",{attrs:{"config-data":t.configData,"global-obj":t.globalObj}})],1)])},n=[],l=e("5530"),i=(e("b64b"),e("e9c4"),e("d3b7"),e("159b"),e("b0c0"),e("472b")),s=e("221a"),c=e("97b9"),r=e("da71"),u=["CcLink","CcDivider"],f={name:"MakeFormLayout",components:{Source:i["a"],Content:s["default"],Setting:c["a"]},provide:function(){return{layoutData:this.form,contentSelectChange:this.contentSelectChange}},data:function(){return{configData:{},form:{formDataList:[],config:{hideLabel:!1,labelWidth:"85px",labelPosition:"right",showRequiredAsterisk:!0,showVerificationMessage:!0,size:"medium",labelSuffix:":"},model:{}},globalObj:{activeComponent:null}}},created:function(){this.getComp()},methods:{saveForm:function(){var t=this,a=JSON.parse(JSON.stringify(this.configData));a.layoutInfo=JSON.stringify(a.layoutInfo),Object(r["h"])(Object(l["a"])(Object(l["a"])({},a),{},{op:"UPDATE"})).then((function(a){t.$message({type:"success",message:"保存成功!"})}))},getComp:function(){var t=this;Object(r["b"])(this.$route.query.id).then((function(a){a.data&&(a.data.layoutInfo?a.data.layoutInfo=JSON.parse(a.data.layoutInfo):a.data.layoutInfo={},t.$set(t,"configData",a.data))}))},$getFormDataJSON:function(){var t=this;return this.form.formDataList.forEach((function(a){"CcLayout"===a.name?a.setting.groupList.forEach((function(a){a&&-1===u.indexOf(a.name)&&(t.form.model[a.prop]=a.value)})):-1===u.indexOf(a.name)&&(t.form.model[a.prop]=a.value)})),JSON.stringify(this.form)},$getFormDataByVueSet:function(){var t=this;return this.form.formDataList.forEach((function(a){"CcLayout"===a.name?a.setting.groupList.forEach((function(a){a&&-1===u.indexOf(a.name)&&t.$set(t.form.model,a.prop,a.value)})):-1===u.indexOf(a.name)&&t.$set(t.form.model,a.prop,a.value)})),this.form},contentSelectChange:function(t){this.$set(this.globalObj,"activeComponent",t)},contentChange:function(t){this.form.formDataList=t}}},b=f,d=e("2877"),m=Object(d["a"])(b,o,n,!1,null,null,null);a["default"]=m.exports},b0a7:function(t,a,e){"use strict";e("0952")},b39d:function(t,a,e){"use strict";e.r(a);e("99af"),e("ac1f"),e("5319");var o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"tableBox-box"},[a("el-table",t._b({attrs:{"row-key":"id",border:!0,data:t.tableData}},"el-table",t.layoutData.tableStyle,!1),[t.layoutData.config&&t.layoutData.config.showCheckbox?a("el-table-column",{key:"column_ss_selection",attrs:{"class-name":"not-able-drag",type:"selection"}}):t._e(),t.layoutData.config&&t.layoutData.config.singleSelection?a("el-table-column",{attrs:{label:"单选",width:"80","class-name":"not-able-drag",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{staticClass:"radio",attrs:{label:e.row.id},model:{value:t.singleValueIndex,callback:function(a){t.singleValueIndex=a},expression:"singleValueIndex"}},[a("span")])]}}],null,!1,1117855166)}):t._e(),t.layoutData.config&&t.layoutData.config.indexRow?a("el-table-column",{key:"column_ss_index",attrs:{type:"index",label:"序号","class-name":"not-able-drag",width:"50"}}):t._e(),t.layoutData.tableConfig&&t.layoutData.tableConfig.rowBtns&&t.layoutData.tableConfig.rowBtns.length?a("el-table-column",{key:"column_ss_edit",attrs:{"class-name":"not-able-drag",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row))])]}}],null,!1,890548927)}):t._e(),t._l(t.layoutData.column,(function(e,o){return[e?a("el-table-column",t._b({key:"column_".concat(e.prop?e.prop.replace(/\./g,"_"):"","_").concat(e.elemCode),attrs:{prop:e.prop,"class-name":t.globalObj.activeComponent&&t.globalObj.activeComponent.data===e?"cellactive":""},scopedSlots:t._u([{key:"header",fn:function(n){return[a("div",{staticClass:"custom-table-header",on:{click:function(a){return a.stopPropagation(),t.handleClick(n,e)}}},[t._v(" "+t._s(e.label||e.prop)+" ")]),t.globalObj.activeComponent&&t.globalObj.activeComponent.data===e?a("span",{staticClass:"delete-icon-table",on:{click:function(a){return a.stopPropagation(),t.handleDeleteClick(n,e,o)}}},[a("i",{staticClass:"el-icon-close"})]):t._e()]}}],null,!0)},"el-table-column",e,!1)):t._e()]}))],2),a("draggable",{directives:[{name:"show",rawName:"v-show",value:t.showTableMask,expression:"showTableMask"}],staticClass:"table-box-mask",attrs:{list:t.draggableTableColumns,group:"TpFormGroup",sort:!0},on:{add:t.onAdd}})],1)},n=[],l=(e("d3b7"),e("159b"),e("a434"),e("b76a")),i=e.n(l),s={components:{draggable:i.a},props:{globalObj:{type:Object,required:!0},layoutData:{type:Object,required:!0}},data:function(){return{draggableTableColumns:[],showTableMask:!1}},computed:{tableData:function(){if(this.layoutData.column){var t=[{}];return this.layoutData.column.forEach((function(a){t[0][a.prop]="展示文本"})),t}return[{}]}},mounted:function(){this.$bus.$on("showTableMask",this.onShowTableMask)},beforeDestroy:function(){this.$bus.$off("showTableMask",this.onShowTableMask)},methods:{handleClick:function(t,a){t.column,t.$index;a.editComponent||(a.editComponent={}),this.tableBoxActive=!1,this.globalObj.activeComponent||this.$set(this.globalObj,"activeComponent",{}),this.$set(this.globalObj,"activeComponent",{type:"cmp",data:a})},handleDeleteClick:function(t,a,e){t.column,t.$index;this.layoutData.column.length<2?this.$utils.showMessageWarning("表格至少保留一列"):this.layoutData.column.splice(e,1)},onShowTableMask:function(t){this.showTableMask=t},onAdd:function(t){this.layoutData.column||this.$set(this.layoutData,"column",[]),this.draggableTableColumns[t.newIndex].rowEditKey=this.$utils.guid(),1===this.draggableTableColumns[t.newIndex].width&&(this.draggableTableColumns[t.newIndex].width=null),this.layoutData.column.push(this.draggableTableColumns[t.newIndex])}}},c=s,r=(e("b0a7"),e("2877")),u=Object(r["a"])(c,o,n,!1,null,null,null);a["default"]=u.exports},cf7c:function(t,a,e){},d011:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("form-box",{staticClass:"tpf-mf-layout--content--form",attrs:{"layout-data":t.layoutData,model:t.model}},[a("draggable",{staticClass:"tpf-mf-layout--content--draggable",attrs:{group:"TpFormGroup",animation:"300"},model:{value:t.layoutData.formDataList,callback:function(a){t.$set(t.layoutData,"formDataList",a)},expression:"layoutData.formDataList"}},t._l(t.layoutData.formDataList,(function(e){return a("which-component",{key:e.elemCode,attrs:{data:e,prop:e.prop,"is-config-ing":"","global-obj":t.globalObj,"layout-data":t.layoutData},nativeOn:{click:function(a){return t.clickComponent(e)}}})})),1)],1)},n=[],l=e("b76a"),i=e.n(l),s={components:{draggable:i.a},props:{globalObj:{type:Object,default:function(){return{}}},layoutData:{type:Object,default:function(){return{}}}},data:function(){return{model:{}}},methods:{clickComponent:function(t){this.globalObj.activeComponent||this.$set(this.globalObj,"activeComponent",{}),this.$set(this.globalObj,"activeComponent",{type:"cmp",data:t})}}},c=s,r=e("2877"),u=Object(r["a"])(c,o,n,!1,null,null,null);a["default"]=u.exports},d0ba:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("form-box",{staticClass:"tpf-mf-layout--content--form",attrs:{"layout-data":t.layoutData,model:t.model}},[a("draggable",{staticClass:"tpf-mf-layout--content--draggable",attrs:{group:"TpFormGroup",animation:"300"},model:{value:t.layoutData.formDataList,callback:function(a){t.$set(t.layoutData,"formDataList",a)},expression:"layoutData.formDataList"}},t._l(t.layoutData.formDataList,(function(e){return a("which-component",{key:e.elemCode,attrs:{data:e,"is-config-ing":"","global-obj":t.globalObj,"layout-data":t.layoutData},nativeOn:{click:function(a){return t.clickComponent(e)}}})})),1)],1)},n=[],l=e("b76a"),i=e.n(l),s={components:{draggable:i.a},props:{globalObj:{type:Object,default:function(){return{}}},layoutData:{type:Object,default:function(){return{}}}},data:function(){return{model:{}}},methods:{clickComponent:function(t){this.globalObj.activeComponent||this.$set(this.globalObj,"activeComponent",{}),this.$set(this.globalObj,"activeComponent",{type:"cmp",data:t})}}},c=s,r=e("2877"),u=Object(r["a"])(c,o,n,!1,null,null,null);a["default"]=u.exports}}]);